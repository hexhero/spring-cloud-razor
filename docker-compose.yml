version: '3'
services:
  serve-discover:
    build: ./serve-discover
    restart: always
    container_name: razor-serve-discover
    networks:
      - razor-net
    ports:
      - '35001:35001'

  serve-oauth2:
    build: ./serve-oauth2
    restart: always
    container_name: razor-serve-oauth2
    networks:
      - razor-net
    extra_hosts:
      - 'mysql-server:192.168.10.45'
    ports:
      - '9001:9001'
    depends_on:
      - serve-discover

  serve-gateway:
    build: ./serve-gateway
    restart: always
    container_name: razor-serve-gateway
    networks:
      - razor-net
    ports:
      - '80:80'
    depends_on:
      - serve-discover

networks:
  razor-net: